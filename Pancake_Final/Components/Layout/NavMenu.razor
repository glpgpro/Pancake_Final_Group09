@implements IDisposable 
@inject NavigationManager NavigationManager 
<div class="top-row ps-3 navbar navbar-dark"> 
    <div class="container-fluid"> 
        <a class="navbar-brand" href="">Pancake</a> 
    </div> 
</div> 
 
<input type="checkbox" title="Navigation menu" class="navbar-toggler" /> 
 
<div class="nav-scrollable" onclick="document.querySelector('.navbar-toggler').click()"> 
    <nav class="flex-column"> 
        @* <div class="nav-item px-3"> 
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All"> 
                <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home 
            </NavLink> 
        </div> *@ 
        @* <div class="nav-item px-3"> 
            <NavLink class="nav-link" href="#"> 
                <span class="bi bi-list-nested-nav-menu" aria-hidden="true"></span> Playlist 
            </NavLink> 
        </div> *@ 
        <AuthorizeView> 
            <Authorized> 
                @* <div class="top-row ps-3 navbar navbar-dark">  *@
                @*     <div class="container-fluid">  *@
                @*         <a class="navbar-brand" href="">Pancake</a>  *@
                @*         <input type="checkbox" title="Navigation menu" class="navbar-toggler" />  *@
                @*     </div>  *@
                @* </div>  *@
                <div class="nav-item px-3"> 
                    <NavLink class="nav-link" href="Home"> 
                        <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home 
                    </NavLink> 
                </div> 
                <div class="nav-item px-3"> 
                    <NavLink class="nav-link" href="Playlist"> 
                        <span class="bi bi-person-fill-nav-menu" aria-hidden="true"></span> Playlist 
                    </NavLink> 
                </div> 
                <div class="nav-item px-3"> 
                    <NavLink class="nav-link" href="Account/Manage"> 
                        <span class="bi bi-person-fill-nav-menu" aria-hidden="true"></span> Account Settings 
                    </NavLink> 
                </div> 
                @* <div class="nav-item px-3"> 
                    <NavLink class="nav-link" href="Artists"> 
                        <span class="bi bi-person-fill-nav-menu" aria-hidden="true"></span> Artists 
                    </NavLink> 
                </div> *@ 
                 <div class="nav-item px-3">
                    <NavLink class="nav-link" href="sub">
                        <span class="bi bi-person-fill-nav-menu" aria-hidden="true"></span>Subscriptions
                    </NavLink>
                </div>
                <div class="nav-item px-3"> 
                    <form action="Account/Logout" method="post"> 
                        <AntiforgeryToken /> 
                        <input type="hidden" name="ReturnUrl" value="@currentUrl" /> 
                        <button type="submit" class="nav-link" href="/"> 
                            <span class="bi bi-arrow-bar-left-nav-menu" aria-hidden="true"></span> Logout 
                        </button> 
                    </form> 
                </div> 
               
            </Authorized> 
            <NotAuthorized> 
                <div class="nav-item px-3"> 
                    <NavLink class="nav-link" href="landing" Match="NavLinkMatch.All"> 
                        <span class="bi bi-house-door-fill-nav-menu" aria-hidden="true"></span> Home 
                    </NavLink> 
                </div> 
                <div class="nav-item px-3"> 
                    <NavLink class="nav-link" href="Account/Register"> 
                        <span class="bi bi-person-nav-menu" aria-hidden="true"></span> Register 
                    </NavLink> 
                </div> 
                <div class="nav-item px-3"> 
                    <NavLink class="nav-link" href="Account/Login"> 
                        <span class="bi bi-person-badge-nav-menu" aria-hidden="true"></span> Login 
                    </NavLink> 
                </div>
                <div class="nav-item px-3">
                    <NavLink class="nav-link" href="sub">
                        <span class="bi bi-person-fill-nav-menu" aria-hidden="true"></span>Subscriptions
                    </NavLink>
                </div>
            </NotAuthorized> 
        </AuthorizeView> 
    </nav> 
</div> 
 
@code { 
    private string? currentUrl; 
    protected override void OnInitialized() 
    { 
        currentUrl = NavigationManager.ToBaseRelativePath(NavigationManager.Uri); 
        NavigationManager.LocationChanged += OnLocationChanged; 
    }
    private void OnLocationChanged(object? sender, LocationChangedEventArgs e)
    {
        currentUrl = NavigationManager.ToBaseRelativePath(e.Location);
        StateHasChanged();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }

}